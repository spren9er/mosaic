data:
  penguins: { file: data/penguins.csv }
params:
  filter: { select: crossfilter }
  select: { select: single }
vconcat:
- hconcat:
  - input: menu
    label: Species
    as: $filter
    from: penguins
    column: species
- vspace: 20
- name: total
  plot:
  - mark: barX
    data: { from: penguins, filterBy: $filter }
    x: { count: '' }
  xLabel: Total â†’
  xDomain: Fixed
- vspace: 20
- name: sex
  plot:
  - mark: gridY
  - mark: barY
    data: { from: penguins, filterBy: $filter }
    x: sex
    y: { count: '' }
  - mark: textY
    data: { from: penguins, filterBy: $filter }
    x: sex
    y: { count: '' }
    text: { count: '' }
    fill: '#efefef'
    dy: 10
  - select: toggleX
    as: $select
    index: 1
  - select: highlight
    by: $select
    index: 1
    opacity: 0.5
  - select: toggleX
    as: $filter
    index: 1
  xLabel: ''
  yLabel: Total
  xDomain: Fixed
  yDomain: Fixed
